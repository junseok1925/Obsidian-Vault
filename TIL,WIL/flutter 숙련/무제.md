# JSON

jsondms key - value 쌍 구조
```dart
{
	'name' : '강준석',
	'age' : 29,
	'hobby' : ['헬스','영화']
}
```

dart에서는 `dart:convert` 라이브러리를 사용해서 Json 데이터를 사용할 수 있다.

## JSON → Dart 객체 (디코딩)

```dart
import 'dart:convert'

void main(){
	String jsonSTR = '{"name" : "jun", "age" : 29}'
	Map<String, dynamic> date = jsonDecode(jsonSTR);
	
	print(data['name']); // '강준석'
	print(data['age']); // 29
}
```
- `jsonDecode()` 는 문자열 → Map/List 로 변환한다

## Dart 객체 → JSON 문자열 ( 인코딩 )

```dart
Map<String, dynamic> user = {
	"name": "jun",
	"age" : 29,
};

String jsonSTR = jsonEncode(user);
print(jsonSTR); //{"name": "jun", "age" : 29}
```
- `jsonEncode()` 는 Map/List → JSON(문자열) 로 변환한다.

## flutter에서 자주 쓰는 패턴


- **User 모델**
```dart
class User {
	final String name;
	final int age;
	
	User({required this.name, required this.age});
	
	// JSON -> 객체
	factory User.fromJson(Map<String, dynamic> json){
		return User(
			name: json['name'],
			age: json['age'],
		);
	}
	
	// 객체 -> JSON
	Map<String, dynamic> toJson(){
		return{
			'name': name,
			'age': age,
		};
	}
	
}
```

**사용**
```dart
void main(){
	String jsonSTR = '{"name": "jun", "age": 29}';
	Map<String, dynamic> jsonMap = jsonDecode(jsonSTR);
	
	User user = User.fromJson(jsonMAp);
	print(user.name); // jun
	
	print(jsonEncode(user.toJson())); // {"name": "jun", "age": 29}
}
```


## 정리

| 목적            | 함수             | 변환 방향              |
| ------------- | -------------- | ------------------ |
| 서버에서 데이터 받을 때 | `jsonDecode()` | JSON 문자열 → Dart 객체 |
| 서버로 데이터 보낼 때  | `jsonEncode()` | Dart 객체 → JSON 문자열 |

---

# MVVM 아키텍처


Model + View + ViewModel 의 약자
Model, View, ViewModel 로 계층을 나누어서 개발

사용자 입력 → View → ViewModel → Model → ViewModel → View(화면 갱신)

- view : 사용자의 입력을 받음
- ViewModel : 입력에 따라 로직을 실행하고 Model을 제어
- Model : 실제 데이터나 비즈니스 로직 처리
- ViewModel은 Model에서 처리된 결과를 다시 View에 반영

## 장점

- 유지보스 용이 : UI와 로직이 분리되어 코드가 깔끔함
- 테스트 쉬움 : ViewModel만 단위 테스트 가능
- 재사용성 증가 : View, Model이 독립적이라 다른 화면에서도 재활용 가능