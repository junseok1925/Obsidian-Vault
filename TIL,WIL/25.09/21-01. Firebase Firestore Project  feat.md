
### Firebase

Google에서 제공하는 모바일 및 웹 어플리케이션 개발 플랫폼

서비스를 직접 구축하지 않아도 로그인, 데이터 저장, 알림 등을 손쉽게 구현할 수 있는 클라우드 백엔드 서비스

### Firestore

Firebase에서 제공하는 클라우드 기반 NoSQL 데이터베이스
앱에서 생성되는 데이터를 실시간으로 저장하고 동기화


---
#### Firebase 설치

1. `curl -sL https://firebase.tools | bash`  : 설치 스크립트 (터미널)
2. `firebase` : 설치 확인
3. `firebase lgoin` : 구글 아이디로 로그인
#### Firestore 설치
1. `dart pub global activate flutterfire_cli` : 설치 스크립트(터미널)
2. 해당 스크립트 입력시 나온 코드 복사`export PATH="$PATH":"$HOME/.pub-cache/bin"`
3. `nano ~/.zshrc` 로 환경변수 수정
4. 복사한 코드 `export PATH="$PATH":"$HOME/.pub-cache/bin"` 붙여넣고 ctrl + x , Y, enter 로 입력한 환경변수 저장
5. 터미널 종료 후 다시 열어 `flutterfire` 입력 시 `FlutterAppRequiredException: .... 어쩌구` 라는 메시지가 나오면 정상
---

#### Firebase 프로젝트 만들기

1. firebase 홈페이지에 가서 콘솔 -> 프로젝트 생성
2. 내 프로젝트 파일 vsCode로 실행 후 해당 터미널에서 `flutterfire configure` 실행
3. 내 프로젝트 선택 후 엔터
4. android, ios 만 선택 후 엔터

#### Firebase에 저장된 데이터 가져오기 (Read)

```dart
// 데이터 Firestore에서 가져오는 함수
// READ
void loadTodos() async {
  // 켜기 - 폴더 열기 - 전체 선택해서 실행
  //firestore 인스턴스 가져오기- 컬렉션 참조 만들기 - 데이터 가져오기
  
  // firestore 인스턴스 가져오기
  final firestore = FirebaseFirestore.instance;
  // "todos"라는 이름의 컬렉션 참조 가져오기
  final colRef = firestore.collection("todos");
  // 해당 컬렉션에 있는 모든 문서 가져오기 (비동기, await 필요)
  final querySnapsot = await colRef.get();
  // 가져온 결과에서 문서들만 리스트로 추출
  final documents = querySnapsot.docs;

   // 가져온 문서 리스트를 반복문으로 todoList 리스트 변수에 넣기
  for (var i = 0; i < documents.length; i++) {
    final data = documents[i];
    print(data.data());
    final map = data.data();
    // firebase 데이터베이스에서 가져온 데이터를 todoList로 가져와야함
    Todo newTodo = Todo(title: map['title'], isDone: map['isDone']);
    todoList.add(newTodo); // db에서 가져온 데이터를 todoList에 넣기
    // 상태 갱신 -> 화면 다시 그리기
    setState(() {});
  }
}

void onCreate() {
  setState(() {
    Todo newTodo = Todo(
      title: controller.text,
      isDone: false,
    ); // 체크박스는 기본값이 해제 상태이므로 false
    todoList.add(newTodo);
    controller.clear(); //textField 입력창 클리어
  });
}

```


![[Pasted image 20250921195645.png]]


- `loadTodo()` 함수로 firestore 인스턴스를 가져온 후 순서대로 컬랙션 -> 문서 ->문서 리스트로 추출 작업
- 반복문의로 추출된 문서 리스트 `documents`를 `todoList` 리스트 변수에 할당
- `setState(() {});` 로 데이터를 가져올 때마다 화면 갱신