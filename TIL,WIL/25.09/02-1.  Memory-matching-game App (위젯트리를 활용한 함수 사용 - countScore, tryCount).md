

<aside> 💡

위젯트리 구조를 이용하여 시도횟수(tryCount), 점수측정(scoreCount) 기능의 함수를 부모 위젯에 생성하여 자식 위젯에서 기능을 사용 할 수 있도록 제작

</aside>

#### Memory-matching-game App 의 트리 구조이다.
![[Pasted image 20250902153158.png]]

- Header에서 작성된 score와 tryCount 값을 Home 위젯으로 옮겨 온다.

### header.dart
```dart
import 'package:flutter/material.dart';
/// Header 위젯은 게임 상단에 점수와 시도 횟수를 보여주고,

/// '새 게임' 버튼 UI를 배치합니다.

/// - tryCount: 시도 횟수

/// - score: 현재 점수

class Header extends StatelessWidget {

final int tryCount;

final int score;

  

// 기본값은 0 (게임 시작 직후를 가정)

Header({super.key, this.tryCount = 0, this.score = 0});

}
```
- 사용할 score와  tryCount 선언

### home.dart
```dart

class Home extends StatefulWidget {
@override
State<Home> createState() => _HomeState();

}
class _HomeState extends State<Home> {

/// 시도 횟수
int tryCount = 0;

/// 점수
int score = 0;
// ---------------------------------------

// 상태 관리 함수들

// ---------------------------------------
/// 시도 횟수를 1 증가시키는 함수

void updateTryCount() {

setState(() {

tryCount++; // setState로 감싸야 UI가 다시 빌드됨

});

}
/// 점수를 10점 증가시키는 함수

void updateScore() {

setState(() {

score += 10;

});

}

```

- header.dart에서 가져온 score와  tryCount를 가지고 시도 횟수 및 점수 증가 함수 생성
-
### 1. 왜 `_HomeState` 클래스 안에 두었을까?

- Flutter는 `StatefulWidget` 구조를 사용할 때, UI에 변화가 필요하면 `State` 클래스 안에 상태값(여기서는 `tryCount`, `score`)을 둔다
- 이렇게 해야 `setState(() { ... })`로 값이 바뀔 때 화면이 자동으로 다시 렌더링된다.

### 2. Flutter에서 위젯(Widget)은 불변 객체

- 위젯은 모두 한 번 생성되면 값이 바뀌지않는다.
- 따라서 위젯 클래스 안에 값을 직접 저장해두면, UI가 바뀔 때마다 새로 생성되는 위젯 때문에 값이 초기화됨
- 즉, "위젯은 UI에 필요한 설정값" 만 보관한다
### 3. State 클랫는 변할 수 있음

- State 객체는 위젯이 랜더링되더라도 계속 유지됨
- 따라서 변해야 하는 값 (점수, 시도한 횟수 등) State 클래스 안에 두어야 한다.

  ```dart
  class _HomeState extends State<Home> {
  int tryCount = 0;
  int score = 0;
	}
```

-> 이렇게하면 위젯이 리랜더링 되어도 해당 값은 날아가지 않고 남아 있음

### 정리
==Widget 클래스 : 어떻게 생겼는지 정의하는 불변의 객체
State 클래스 : 현재 상태 값을 담고, setState()로 UI 업데이트를 트리거하는 공간